# MySQL数据库经典面试题解析

### 一、MySQL 索引使用有哪些注意事项呢？

​	可以从三个维度回答这个问题：索引哪些情况会失效，索引不适合哪些场景，索引规则

- #### 索引哪些情况会失效

  - 查询条件包含or，可能导致索引失效
  - 字符串类型，where时，如果不用引号括起来，会导致类型转换，从而索引失效
  - like以通配符 % 开头的索引会失效
  - 使用联合索引，查询时条件列不是联合索引中的一个列。不符合最左前缀原则，索引失效
  - 在索引列上使用mysql内置函数，导致失效
  - 对索引列使用运算符（+、-、*、/）
  - 对索引列使用（!=、<>、not in）
  - 对索引列使用is null、is not null
  - 连接查询，查询关联的字段编码格式不一样
  - 当mysql判断全表扫描比使用索引快时，则不使用索引

- 索引不适合哪些场景

  - 全表数据量少，建索引得不偿失
  - 更新频繁的字段
  - 区分度低的字段（如性别，平均分）

- 索引的一些潜规则

  - 索引覆盖
  - 回表
  - 索引结构
  - 最左前缀原则
  - 索引下推

### 二、MySQL 遇到过死锁问题吗，你是如何解决的？

​	排查死锁的流程一般如下：

- 查看死锁日志show engine innodb status
- 找出死锁sql
- 分析sql加锁情况
- 模拟死锁案发
- 分析死锁日志
- 分析死锁结果

### 三、日常工作中你是如何优化sql的?

1. 对查询频繁的字段上索引
2. 避免返回不必要的数据，只select必要数据
3. 适当分批量查询
4. 优化sql结构
5. 分库分表
6. 读写分离
7. 不怎么更新的数据加载到内存，高频访问数据做缓存

